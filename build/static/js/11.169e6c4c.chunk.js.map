{"version":3,"sources":["lib/DatatableClient.js","components/Admin/UserAll.js"],"names":["DatatableClient","props","rows","columns","options","primary_id","contentTable","paginationProps","paginationTableProps","keyField","data","search","toolkitprops","className","striped","classes","headerClasses","baseProps","length","pagination","paginationFactory","UserAll","dispatch","useDispatch","loading","useSelector","state","useState","setrows","setpage","init","a","type","axios","get","then","res","useLayoutEffect","custom","totalSize","onPageChange","page","sizePerPage","isDummyField","text","formatter","value","row","rowIndex","dataField","lang","createdAt","e","Helpers","colIndex","onClick","id","user_id","constant","confirmdel","r","post","catch","color","size","xl","routesdetail","name","to","location","pathname"],"mappings":"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","file":"static/js/11.169e6c4c.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { CardHeader, Row, CardFooter, Form } from \"reactstrap\";\r\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory, {\r\n  PaginationProvider,\r\n  PaginationListStandalone,\r\n  PaginationTotalStandalone,\r\n} from \"react-bootstrap-table2-paginator\";\r\nfunction DatatableClient(props) {\r\n  const { rows, columns, options,primary_id } = props;\r\n\r\n  const contentTable = ({ paginationProps, paginationTableProps }) => (\r\n    <>\r\n      <ToolkitProvider keyField={primary_id} data={rows} columns={columns} search>\r\n        {(toolkitprops) => (\r\n          <>\r\n            <div className=\"table-responsive showtable\">\r\n              {/* {(() => {\r\n                if (rows.length)\r\n                  return (\r\n                    <>\r\n                      <hr class=\"mt-1 mb-3\" />\r\n                      <Form inline className={\"pb-3 px-3 float-md-right\"}>\r\n                        <input\r\n                          className=\"form-control form-control-sm\"\r\n                          placeholder=\"ค้นหา\"\r\n                          type=\"text\"\r\n                          onChange={(e) =>\r\n                            toolkitprops.searchProps.onSearch(e.target.value)\r\n                          }\r\n                        />\r\n                      </Form>\r\n                    </>\r\n                  );\r\n              })()} */}\r\n\r\n              <BootstrapTable\r\n                striped\r\n                classes=\"table-sm table-flush\"\r\n                headerClasses=\"thead-light\"\r\n                {...toolkitprops.baseProps}\r\n                {...paginationTableProps}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n      </ToolkitProvider>\r\n      <CardFooter className=\"py-3\">\r\n        <div className={\"float-left\"}>\r\n          {(() => {\r\n            if (rows.length)\r\n              return (\r\n                <>\r\n                  <PaginationTotalStandalone {...paginationProps} />\r\n                </>\r\n              );\r\n          })()}\r\n        </div>\r\n        <div className=\"float-right\">\r\n          {(() => {\r\n            if (rows.length)\r\n              return (\r\n                <>\r\n                  <PaginationListStandalone {...paginationProps} />\r\n                </>\r\n              );\r\n          })()}\r\n        </div>\r\n      </CardFooter>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <PaginationProvider pagination={paginationFactory(options)}>\r\n        {contentTable}\r\n      </PaginationProvider>\r\n    </>\r\n  );\r\n}\r\nexport default DatatableClient;\r\n","import React, { useState, useLayoutEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"functions/axiosinstance\";\nimport * as Helpers from \"functions/others\";\nimport DatatableClient from \"lib/DatatableClient\";\nimport lang from \"lang/th\";\nimport { Card, CardHeader, Row, Col, Button } from \"reactstrap\";\n\nfunction UserAll(props) {\n  const dispatch = useDispatch();\n  const loading = useSelector((state) => state.loading);\n  const [rows, setrows] = useState([]);\n  const [page, setpage] = useState(1);\n  const init = async () => {\n    dispatch({ type: \"SHOW_LOADING\" });\n    await axios()\n      .get(\"/users\")\n      .then((res) => {\n        dispatch({ type: \"HIDE_LOADING\" });\n        setrows(res.data);\n      });\n  };\n  const OnDelete = (id) => {\n    Helpers.ConfirmDialog(lang.constant.confirmdel, \"\").then(async (r) => {\n      dispatch({ type: \"SHOW_LOADING\" });\n      await axios()\n        .post(\"/user/del\", {\n          id: id,\n        })\n        .then((r) => {\n          dispatch({ type: \"HIDE_LOADING\" });\n          init();\n        })\n        .catch((e) => {});\n    });\n  };\n  useLayoutEffect(() => {\n    (async () => {\n      await init();\n    })();\n  }, []);\n  const options = {\n    custom: true,\n    totalSize: rows.length,\n    onPageChange: (page, sizePerPage) => {\n      setpage(page);\n    }\n  };\n  const columns = [\n    {\n      isDummyField: true,\n      text: \"#\",\n      formatter: (value, row, rowIndex) => {\n        let key = rowIndex + 1;\n        return key;\n      },\n    },\n    {\n      dataField: \"user_id\",\n      text: \"รหัสพนักงาน\",\n      formatter: (value, row, rowIndex) => {\n        return <b>{value}</b>;\n      },\n    },\n    {\n      dataField: \"title\",\n      text: \"สิทธิการใช้งาน\",\n    },\n    {\n      dataField: \"createdAt\",\n      text: lang.createdAt,\n      formatter: (e) => Helpers.Datetime(e),\n    },\n    {\n      dataField: \"user_id\",\n      text: \"\",\n      formatter: (value, row, rowIndex, colIndex) => {\n        return (\n          <>\n            <Link onClick={(e) => OnDelete(row.user_id)}>\n              <Button color=\"secondary\" size=\"sm\">\n                <i className=\"fas fa-trash\"></i>\n              </Button>\n            </Link>\n          </>\n        );\n      },\n    },\n  ];\n  return (\n    <>\n      <Row className={\"mt-3 \" + (loading ? \"d-none\" : \"\")}>\n        <Col className=\"mb-5 mb-xl-0\" xl=\"12\">\n          <Card className=\"shadow\">\n            <CardHeader className=\"border-0\">\n              <Row className=\"align-items-center\">\n                <div className=\"col\">\n                  <h2 className=\"mb-0\">{props.routesdetail.name}</h2>\n                </div>\n                <div className=\"col text-right\">\n                  <Link to={(location) => location.pathname + \"/add\"}>\n                    <i className=\"fas fa-plus\"></i> เพิ่มพนักงาน\n                  </Link>\n                </div>\n              </Row>\n            </CardHeader>\n            <DatatableClient columns={columns} rows={rows} primary_id={\"user_id\"} options={options}/>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  );\n}\n\nexport default UserAll;\n"],"sourceRoot":""}