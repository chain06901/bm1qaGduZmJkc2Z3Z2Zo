{"version":3,"sources":["lib/DatatableClient.js","components/Admin/CompanyAll.js"],"names":["DatatableClient","props","rows","columns","options","primary_id","contentTable","paginationProps","paginationTableProps","keyField","data","search","toolkitprops","className","striped","classes","headerClasses","baseProps","length","pagination","paginationFactory","CompanyAll","dispatch","useDispatch","loading","useSelector","state","useState","setrows","page","setpage","init","a","type","axios","get","then","res","useLayoutEffect","custom","totalSize","onPageChange","sizePerPage","isDummyField","text","formatter","value","row","rowIndex","dataField","lang","createdAt","date","updatedAt","Helpers","colIndex","to","location","pathname","company_id","color","size","onClick","e","id","constant","confirmdel","r","post","catch","xl","routesdetail","name"],"mappings":"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","file":"static/js/10.9aec81b4.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { CardHeader, Row, CardFooter, Form } from \"reactstrap\";\r\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory, {\r\n  PaginationProvider,\r\n  PaginationListStandalone,\r\n  PaginationTotalStandalone,\r\n} from \"react-bootstrap-table2-paginator\";\r\nfunction DatatableClient(props) {\r\n  const { rows, columns, options,primary_id } = props;\r\n\r\n  const contentTable = ({ paginationProps, paginationTableProps }) => (\r\n    <>\r\n      <ToolkitProvider keyField={primary_id} data={rows} columns={columns} search>\r\n        {(toolkitprops) => (\r\n          <>\r\n            <div className=\"table-responsive showtable\">\r\n              {/* {(() => {\r\n                if (rows.length)\r\n                  return (\r\n                    <>\r\n                      <hr class=\"mt-1 mb-3\" />\r\n                      <Form inline className={\"pb-3 px-3 float-md-right\"}>\r\n                        <input\r\n                          className=\"form-control form-control-sm\"\r\n                          placeholder=\"ค้นหา\"\r\n                          type=\"text\"\r\n                          onChange={(e) =>\r\n                            toolkitprops.searchProps.onSearch(e.target.value)\r\n                          }\r\n                        />\r\n                      </Form>\r\n                    </>\r\n                  );\r\n              })()} */}\r\n\r\n              <BootstrapTable\r\n                striped\r\n                classes=\"table-sm table-flush\"\r\n                headerClasses=\"thead-light\"\r\n                {...toolkitprops.baseProps}\r\n                {...paginationTableProps}\r\n              />\r\n            </div>\r\n          </>\r\n        )}\r\n      </ToolkitProvider>\r\n      <CardFooter className=\"py-3\">\r\n        <div className={\"float-left\"}>\r\n          {(() => {\r\n            if (rows.length)\r\n              return (\r\n                <>\r\n                  <PaginationTotalStandalone {...paginationProps} />\r\n                </>\r\n              );\r\n          })()}\r\n        </div>\r\n        <div className=\"float-right\">\r\n          {(() => {\r\n            if (rows.length)\r\n              return (\r\n                <>\r\n                  <PaginationListStandalone {...paginationProps} />\r\n                </>\r\n              );\r\n          })()}\r\n        </div>\r\n      </CardFooter>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <PaginationProvider pagination={paginationFactory(options)}>\r\n        {contentTable}\r\n      </PaginationProvider>\r\n    </>\r\n  );\r\n}\r\nexport default DatatableClient;\r\n","import React, { useState, useLayoutEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"functions/axiosinstance\";\nimport * as Helpers from \"functions/others\";\nimport lang from \"lang/th\"\nimport DatatableClient from \"lib/DatatableClient\";\nimport { Card, CardHeader, Table, Row, Col, Button } from \"reactstrap\";\n\nfunction CompanyAll(props) {\n  const dispatch = useDispatch();\n  const loading = useSelector((state) => state.loading);\n  const [rows, setrows] = useState([]);\n  const [page, setpage] = useState(1);\n  const init = async () => {\n    dispatch({ type: \"SHOW_LOADING\" });\n    await axios()\n      .get(\"/companys\")\n      .then((res) => {\n        dispatch({ type: \"HIDE_LOADING\" });\n        setrows(res.data);\n      });\n  };\n  const OnDelete = (id) => {\n    Helpers.ConfirmDialog(lang.constant.confirmdel, \"\").then(async (r) => {\n      dispatch({ type: \"SHOW_LOADING\" });\n      await axios()\n        .post(\"/company/del\", {\n          id: id,\n        })\n        .then((r) => {\n          dispatch({ type: \"HIDE_LOADING\" });\n          init();\n        })\n        .catch((e) => {});\n    });\n  };\n  useLayoutEffect(() => {\n    (async () => {\n      await init();\n    })();\n  }, []);\n  const options = {\n    custom: true,\n    totalSize: rows.length,\n    page: page,\n    onPageChange: (page, sizePerPage) => {\n      setpage(page);\n    }\n  };\n  const columns = [\n    {\n      isDummyField: true,\n      text: \"#\",\n      formatter: (value, row, rowIndex) => {\n        let key = (page - 1) * 10 + (rowIndex + 1);\n        return key;\n      },\n    },\n    {\n      dataField: \"name\",\n      text: \"บริษัท\",\n      formatter: (value, row, rowIndex) => {\n        return <b>{value}</b>;\n      },\n    },\n    {\n      dataField: \"username\",\n      text: \"Username\",\n    },\n    {\n      dataField: \"contact\",\n      text: \"ผู้ประสานงาน\",\n    },\n    {\n      dataField: \"createdAt\",\n      text: lang.createdAt,\n      formatter: (value, row, rowIndex) => {\n        let date = (row.updatedAt ? row.updatedAt : row.createdAt);\n        return Helpers.Datetime(date);\n      },\n    },\n    {\n      dataField: \"company_id\",\n      text: \"\",\n      formatter: (value, row, rowIndex, colIndex) => {\n        return (\n          <>\n            <Link\n              to={(location) =>\n                location.pathname + \"/edit?id=\" + row.company_id\n              }\n            >\n              <Button color=\"secondary\" size=\"sm\">\n                <i className=\"fas fa-pen\"></i>\n              </Button>\n            </Link>{\" \"}\n            <Link onClick={(e) => OnDelete(row.company_id)}>\n              <Button color=\"secondary\" size=\"sm\">\n                <i className=\"fas fa-trash\"></i>\n              </Button>\n            </Link>\n          </>\n        );\n      },\n    },\n  ];\n  return (\n    <>\n      <Row className={\"mt-3 \" + (loading ? \"d-none\" : \"\")}>\n        <Col className=\"mb-5 mb-xl-0\" xl=\"12\">\n          <Card className=\"shadow\">\n            <CardHeader className=\"border-0\">\n              <Row className=\"align-items-center\">\n                <div className=\"col\">\n                  <h2 className=\"mb-0\">{props.routesdetail.name}</h2>\n                </div>\n                <div className=\"col text-right\">\n                  <Link to={(location) => location.pathname + \"/add\"}>\n                    <i className=\"fas fa-plus\"></i> เพิ่มบริษัท\n                  </Link>\n                </div>\n              </Row>\n            </CardHeader>\n            <DatatableClient columns={columns} rows={rows} options={options} primary_id={\"company_id\"}/>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  );\n}\n\nexport default CompanyAll;\n"],"sourceRoot":""}